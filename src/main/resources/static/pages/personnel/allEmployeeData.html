<html xmlns:v-bind="http://www.w3.org/1999/xhtml">
    <meta charset="utf-8">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../../plugins/elementui/index.css">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <script src="../../js/axios-0.18.0.js"></script>
    <script src="../../js/vue.js"></script>
    <!-- 引入组件库 -->
    <script src="../../plugins/elementui/index.js"></script>
    <script type="text/javascript"></script>  <!--  使用的时候要先script      -->
    <body>
    <div id="app">
        <template>
            <div>
                <el-container>
                    <el-header style="padding: 0px;display:flex;justify-content:space-between;align-items: center">
                        <div style="display: inline">
                            <el-input
                                    placeholder="通过员工名搜索员工,记得回车哦..."
                                    clearable
                                    @change="empAllData()"
                                    style="width: 300px;margin: 0px;padding: 0px;"
                                    size="mini"
                                    :disabled="advanceSearchViewVisible"
                                    @keyup.enter.native="searchEmp"
                                    prefix-icon="el-icon-search"
                                    v-model="keywords">
                            </el-input>
                            <el-button type="primary" size="mini" style="margin-left: 5px" icon="el-icon-search" @click="empAllData()">搜索
                            </el-button>
                        </div>
                        <div style="margin-left: 5px;margin-right: 20px;display: inline">
                            <el-upload
                                    :show-file-list="false"
                                    accept="application/vnd.ms-excel"
                                    action="/employee/basic/importEmp"
                                    :on-success="fileUploadSuccess"
                                    :on-error="fileUploadError" :disabled="fileUploadBtnText=='正在导入'"
                                    :before-upload="beforeFileUpload" style="display: inline">
                                <el-button size="mini" type="success" :loading="fileUploadBtnText=='正在导入'"><i class="fa fa-lg fa-level-up"
                                                                                                              style="margin-right: 5px"></i>{{fileUploadBtnText}}
                                </el-button>
                            </el-upload>
                            <el-button type="success" size="mini" @click="exportEmps"><i class="fa fa-lg fa-level-down"
                                                                                         style="margin-right: 5px"></i>导出数据
                            </el-button>
                            <el-button type="primary" size="mini" icon="el-icon-plus"
                                       @click="showAddEmpView">
                                添加员工
                            </el-button>
                        </div>
                    </el-header>
                    <el-main style="padding-left: 0px;padding-top: 0px">
                        <div>
                            <transition name="slide-fade">
                                <div
                                        style="margin-bottom: 10px;border: 1px;border-radius: 5px;border-style: solid;padding: 5px 0px 5px 0px;box-sizing:border-box;border-color: #20a0ff"
                                        v-show="advanceSearchViewVisible">
                                    <el-row>
                                        <el-col :span="5">
                                            政治面貌:
                                            <el-select v-model="emp.politicId" style="width: 130px" size="mini" placeholder="政治面貌">
                                                <el-option
                                                        v-for="item in politics"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-col>
                                        <el-col :span="4">
                                            民族:
                                            <el-select v-model="emp.nationId" style="width: 130px" size="mini" placeholder="请选择民族">
                                                <el-option
                                                        v-for="item in nations"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-col>
                                        <el-col :span="4">
                                            职位:
                                            <el-select v-model="emp.posId" style="width: 130px" size="mini" placeholder="请选择职位">
                                                <el-option
                                                        v-for="item in positions"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-col>
                                        <el-col :span="4">
                                            职称:
                                            <el-select v-model="emp.jobLevelId" style="width: 130px" size="mini" placeholder="请选择职称">
                                                <el-option
                                                        v-for="item in joblevels"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-col>
                                        <el-col :span="7">
                                            聘用形式:
                                            <el-radio-group v-model="emp.engageForm">
                                                <el-radio label="劳动合同">劳动合同</el-radio>
                                                <el-radio style="margin-left: 15px" label="劳务合同">劳务合同</el-radio>
                                            </el-radio-group>
                                        </el-col>
                                    </el-row>
                                    <el-row style="margin-top: 10px">
                                        <el-col :span="5">
                                            所属部门:
                                            <el-popover
                                                    v-model="showOrHidePop2"
                                                    placement="right"
                                                    title="请选择部门"
                                                    trigger="manual">
                                                <el-tree :data="deps" :default-expand-all="true" :props="defaultProps" :expand-on-click-node="false"></el-tree>
                                                <div slot="reference"
                                                     style="width: 130px;height: 26px;display: inline-flex;font-size:13px;border: 1px;border-radius: 5px;border-style: solid;padding-left: 13px;box-sizing:border-box;border-color: #dcdfe6;cursor: pointer;align-items: center"
                                                     @click="" v-bind:style="{color: depTextColor}">{{emp.departmentName}}
                                                </div>
                                            </el-popover>
                                        </el-col>
                                        <el-col :span="10">
                                            入职日期:
                                            <el-date-picker
                                                    v-model="beginDateScope"
                                                    unlink-panels
                                                    size="mini"
                                                    type="daterange"
                                                    value-format="yyyy-MM-dd"
                                                    range-separator="至"
                                                    start-placeholder="开始日期"
                                                    end-placeholder="结束日期">
                                            </el-date-picker>
                                        </el-col>
                                        <el-col :span="5" :offset="4">
                                            <el-button size="mini" @click="cancelSearch">取消</el-button>
                                            <el-button icon="el-icon-search" type="primary" size="mini" @click="searchEmp">搜索</el-button>
                                        </el-col>
                                    </el-row>
                                </div>
                            </transition>
                            <el-table
                                    :data="emps"
                                    v-loading="tableLoading"
                                    border
                                    stripe
                                    @selection-change="handleSelectionChange"
                                    size="mini"
                                    style="width: 100%">
                                <el-table-column
                                        type="selection"
                                        align="left"
                                        width="30">
                                </el-table-column>
                                <el-table-column
                                        prop="name"
                                        align="left"
                                        label="姓名"
                                        width="90">
                                </el-table-column>
                                <el-table-column
                                        prop="sex"
                                        label="性别"
                                        width="50">
                                </el-table-column>
                                <el-table-column
                                        width="85"
                                        align="left"
                                        label="出生日期"
                                        prop="birthday">
                                </el-table-column>
                                <el-table-column
                                        width="50"
                                        prop="native"
                                        label="民族">
                                </el-table-column>
                                <el-table-column
                                        prop="address"
                                        width="80"
                                        label="籍贯">
                                </el-table-column>
                                <el-table-column
                                        prop="poliName"
                                        label="政治面貌">
                                </el-table-column>
                                <el-table-column
                                        prop="email"
                                        width="180"
                                        align="left"
                                        label="电子邮件">
                                </el-table-column>
                                <el-table-column
                                        prop="phone"
                                        width="100"
                                        label="电话号码">
                                </el-table-column>
                                <el-table-column
                                        prop="address"
                                        width="220"
                                        align="left"
                                        label="联系地址">
                                </el-table-column>
                                <el-table-column
                                        prop="depName"
                                        align="left"
                                        width="100"
                                        label="所属部门">
                                </el-table-column>
                                <el-table-column
                                        width="100"
                                        align="left"
                                        prop="jobName"
                                        label="职位">
                                </el-table-column>
                                <el-table-column
                                        prop="jobpattern"
                                        label="聘用形式">
                                </el-table-column>
                                <el-table-column
                                        prop="joinJob"
                                        width="85"
                                        align="left"
                                        label="入职日期">
                                </el-table-column>
                                <el-table-column
                                        width="85"
                                        align="left"
                                        prop="regularization"
                                        label="转正日期">
                                </el-table-column>
                                <el-table-column
                                        width="95"
                                        prop="contractStart"
                                        align="left"
                                        label="合同起始日期">
                                </el-table-column>
                                <el-table-column
                                        width="95"
                                        align="left"
                                        prop="contractEnd"
                                        label="合同截至日期">
                                </el-table-column>
                                <el-table-column
                                        prop="contractIndate"
                                        align="left"
                                        width="70"
                                        label="合同期限(年)">
                                        <template slot-scope="scope">{{ scope.row.contractIndate}}年</template>
                                </el-table-column>
                                <el-table-column
                                        align="left"
                                        prop="study"
                                        label="最高学历">
                                </el-table-column>
                                <el-table-column
                                        fixed="right"
                                        label="操作"
                                        width="120">
                                    <template slot-scope="scope">
                                        <el-button @click="updateView(scope.row)" style="padding: 3px 4px 3px 4px;margin: 1px"
                                                   size="mini">编辑
                                        </el-button>
                                        <el-button type="danger" style="padding: 3px 4px 3px 4px;margin: 2px" size="mini"
                                                   @click="deleteEmp(scope.row)">删除
                                        </el-button>
                                    </template>
                                </el-table-column>
                            </el-table>
                            <div style="display: flex;justify-content: space-between;margin: 2px">
                                <el-button type="danger" size="mini" v-if="emps.length>0" :disabled="emps.length==0"
                                           @click="deleteManyEmps()">批量删除
                                </el-button>
                                <div class="block">
                                    <el-pagination
                                            @current-change="handcurrentChange"
                                            :page-size="5"
                                            :current-page="currentPage"
                                            :total="totalCount"
                                            layout="prev, pager, next">
                                    </el-pagination>
                                </div>
                            </div>
                        </div>
                    </el-main>
                </el-container>
                <el-form :model="emp" :rules="rules" ref="addEmpForm" style="margin: 0px;padding: 0px;">
                    <div style="text-align: left">
                        <el-dialog
                                :title="dialogTitle"
                                style="padding: 0px;"
                                :close-on-click-modal="false"
                                :visible.sync="dialogVisible"
                                width="77%">
                            <el-row>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="用户名:" prop="username">
                                            <el-input prefix-icon="el-icon-edit" v-model="emp.username" size="mini" style="width: 150px"
                                             @blur="verifyUsername" placeholder="请输入用户名(不允许重复)"></el-input>
                                            <div v-bind:style="usernameState==1?'color: #6bb10a' : 'color: red'">
                                                <div style="font-size: 12px">{{usernameFont}}</div>
                                            </div>
                                            </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="姓名:" prop="name">
                                            <el-input prefix-icon="el-icon-edit" v-model="emp.name" size="mini" style="width: 150px"
                                                      placeholder="请输入员工姓名"></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="6">
                                    <div>
                                        <el-form-item label="性别:" prop="sex">
                                            <el-radio-group v-model="emp.sex">
                                                <el-radio label="男">男</el-radio>
                                                <el-radio style="margin-left: 15px" label="女">女</el-radio>
                                            </el-radio-group>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="出生日期:" prop="birthday">
                                            <el-date-picker
                                                    v-model="emp.birthday"
                                                    size="mini"
                                                    value-format="yyyy-MM-dd HH:mm:ss"
                                                    style="width: 150px"
                                                    type="date"
                                                    placeholder="出生日期">
                                            </el-date-picker>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="6">
                                    <div>
                                        <el-form-item label="政治面貌:" prop="politicId">
                                            <el-select v-model="emp.politicId" style="width: 200px" size="mini" placeholder="政治面貌">
                                                <el-option
                                                        v-for="item in politics"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="民族:" prop="native">
                                            <el-select v-model="emp.native" style="width: 150px" size="mini" placeholder="请选择民族">
                                                <el-option
                                                        v-for="item in nations"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.name">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="籍贯:" prop="nativePlace">
                                            <el-input v-model="emp.nativePlace" size="mini" style="width: 120px" placeholder="员工籍贯"></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="电子邮箱:" prop="email">
                                            <el-input prefix-icon="el-icon-message" v-model="emp.email" size="mini" style="width: 150px"
                                                      placeholder="电子邮箱地址..."></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="联系地址:" prop="address">
                                            <el-input prefix-icon="el-icon-edit" v-model="emp.address" size="mini" style="width: 200px"
                                                      placeholder="联系地址..."></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="职位:" prop="jobLevelId">
                                            <el-select v-model="emp.jobLevelId" style="width: 150px" size="mini" placeholder="请选择职位">
                                                <el-option
                                                        v-for="item in joblevels"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="所属部门:" prop="departmentId">
                                            <el-select v-model="emp.departmentId" style="width: 150px" size="mini" placeholder="请选择职位">
                                                <el-option
                                                        v-for="item in departments"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.id">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="电话号码:" prop="phone">
                                            <el-input prefix-icon="el-icon-phone" v-model="emp.phone" size="mini" style="width: 200px"
                                                      placeholder="电话号码..."></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="6">
                                    <div>
                                        <el-form-item label="学历:" prop="study">
                                            <el-select v-model="emp.study" style="width: 120px" size="mini" placeholder="最高学历">
                                                <el-option
                                                        v-for="item in degrees"
                                                        :key="item.id"
                                                        :label="item.name"
                                                        :value="item.name">
                                                </el-option>
                                            </el-select>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="专业名称:" prop="specialty">
                                            <el-input prefix-icon="el-icon-edit" v-model="emp.specialty" size="mini" style="width: 200px"
                                                      placeholder="专业名称"></el-input>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="入职日期:" prop="beginDate">
                                            <el-date-picker
                                                    v-model="emp.beginDate"
                                                    size="mini"
                                                    style="width: 130px"
                                                    type="date"
                                                    value-format="yyyy-MM-dd HH:mm:ss"
                                                    placeholder="入职日期">
                                            </el-date-picker>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="转正日期:" prop="conversionTime">
                                            <el-date-picker
                                                    v-model="emp.conversionTime"
                                                    size="mini"
                                                    style="width: 130px"
                                                    value-format="yyyy-MM-dd HH:mm:ss"
                                                    type="date"
                                                    placeholder="转正日期">
                                            </el-date-picker>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="合同起始日期:" prop="beginContract">
                                            <el-date-picker
                                                    v-model="emp.beginContract"
                                                    size="mini"
                                                    value-format="yyyy-MM-dd HH:mm:ss"
                                                    style="width: 135px"
                                                    type="date"
                                                    placeholder="合同起始日期">
                                            </el-date-picker>
                                        </el-form-item>
                                    </div>
                                </el-col>
                                <el-col :span="5">
                                    <div>
                                        <el-form-item label="合同终止日期:" prop="endContract">
                                            <el-date-picker
                                                    v-model="emp.endContract"
                                                    value-format="yyyy-MM-dd HH:mm:ss"
                                                    size="mini"
                                                    style="width: 135px"
                                                    type="date"
                                                    placeholder="合同终止日期">
                                            </el-date-picker>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="6">
                                    <div>
                                        <el-form-item label="聘用形式:" prop="engageForm">
                                            <el-radio-group v-model="emp.engageForm">
                                                <el-radio label="全职">全职</el-radio>
                                                <el-radio style="margin-left: 15px" label="兼职">兼职</el-radio>
                                            </el-radio-group>
                                        </el-form-item>
                                    </div>
                                </el-col>
                            </el-row>
                            <span slot="footer" class="dialog-footer">
    <el-button size="mini">取 消</el-button>
    <el-button size="mini" type="primary" @click="addEmp(emp.id)">确 定</el-button>
  </span>
                        </el-dialog>
                    </div>
                </el-form>
            </div>
        </template>
    </div>
    <style>
        .el-dialog__body {
            padding-top: 0px;
            padding-bottom: 0px;
        }

        .slide-fade-enter-active {
            transition: all .8s ease;
        }

        .slide-fade-leave-active {
            transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);
        }

        .slide-fade-enter, .slide-fade-leave-to {
            transform: translateX(10px);
            opacity: 0;
        }
    </style>

    </body>
    <script>
        var that ;
        new Vue({
            el:'#app' ,
            data : {
                        usernameState : -1 ,
                        usernameFont : "" ,
                        emps: [],
                        empsId : [] ,
                        keywords: '',
                        fileUploadBtnText: '导入数据',
                        beginDateScope: '',
                        faangledoubleup: 'fa-angle-double-up',
                        faangledoubledown: 'fa-angle-double-down',
                        dialogTitle: '',
                        multipleSelection: [],
                        depTextColor: '#c0c4cc',
                        nations: [],
                        politics: [],
                        departments : [] ,
                        joblevels: [],
                        totalCount: -1,
                        currentPage: 1,
                        degrees: [{id: 4, name: '大专'}, {id: 5, name: '本科'}, {id: 6, name: '硕士'}, {id: 7, name: '博士'}, {
                            id: 3,
                            name: '高中'
                        }, {id: 2, name: '初中'}, {id: 1, name: '小学'}, {id: 8, name: '其他'}],
                        deps: [],
                        defaultProps: {
                            label: 'name',
                            isLeaf: 'leaf',
                            children: 'children'
                        },
                        dialogVisible: false,
                        tableLoading: false,
                        advanceSearchViewVisible: false,
                        showOrHidePop: false,
                        showOrHidePop2: false,
                        emp: {
                            username : "" ,
                            name: '',
                            sex: '',
                            birthday: '',
                            native: '',
                            politicId: '',
                            email: '',
                            phone: '',
                            address: '',
                            departmentId: '',
                            departmentName: '所属部门...',
                            jobLevelId: '',
                            engageForm: '',
                            study: '',
                            profession: '',
                            school: '',
                            beginDate: '',
                            conversionTime: '',
                            beginContract: '',
                            endContract: ''
                        },
                        rules: {
                            username : [{required: true, message: '必填:用户名', trigger: 'blur'}],
                            name: [{required: true, message: '必填:姓名', trigger: 'blur'}],
                            gender: [{required: true, message: '必填:性别', trigger: 'blur'}],
                            birthday: [{required: true, message: '必填:出生日期', trigger: 'blur'}],
                            wedlock: [{required: true, message: '必填:婚姻状况', trigger: 'blur'}],
                            nationId: [{required: true, message: '必填:民族', trigger: 'change'}],
                            nativePlace: [{required: true, message: '必填:籍贯', trigger: 'blur'}],
                            politicId: [{required: true, message: '必填:政治面貌', trigger: 'blur'}],
                            phone: [{required: true, message: '必填:电话号码', trigger: 'blur'}],
                            address: [{required: true, message: '必填:联系地址', trigger: 'blur'}],
                            departmentId: [{required: true, message: '必填:部门', trigger: 'blur'}],
                            posId: [{required: true, message: '必填:职位', trigger: 'blur'}],
                            engageForm: [{required: true, message: '必填:聘用形式', trigger: 'blur'}],
                            tiptopDegree: [{required: true, message: '必填:最高学历', trigger: 'change'}],
                            specialty: [{required: true, message: '必填:专业', trigger: 'blur'}],
                            school: [{required: true, message: '必填:毕业院校', trigger: 'blur'}],
                            beginDate: [{required: true, message: '必填:入职日期', trigger: 'blur'}],
                            conversionTime: [{required: true, message: '必填:转正日期', trigger: 'blur'}],
                            beginContract: [{required: true, message: '必填:合同起始日期', trigger: 'blur'}],
                            endContract: [{required: true, message: '必填:合同终止日期', trigger: 'blur'}],
                            workAge: [{required: true, message: '必填:工龄', trigger: 'blur'}]
                        }
            } ,
            created : function () {
                that = this ;
                that.empAllData() ;
                that.SelectEmpNation() ;
                that.SelectEmpJoblevel() ;
                that.SelectEmpPoliticsstatu() ;
                that.SelectEmpDepartments () ;
            } ,
            methods : {
                // 显示所有的用户信息
                empAllData : function () {
                    axios.get( "/Emp/allWriteEmp?nowPage="+ that.currentPage+ "&message=" + that.keywords ).then(function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                           that.emps = data.entity ;
                           that.currentPage = data.nowPage ;
                           that.totalCount = data.allPage ;
                        }
                    })
                } ,
                // 增加删除的数据
                handleSelectionChange : function( row ) {
                    that.empsId = row ;
                } ,
                // 数据回显
                updateView : function ( row ) {
                    that.dialogVisible = true ;
                    that.emp = row ;
                } ,
                // 改变数据
                updateEmps : function() {
                    axios.post( "/EmpData/updateEmp" , that.emp ).then( function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                            that.empAllData() ;
                            that.dialogVisible = false ;
                            that.$message({
                                message: '修改模块成功',
                                type: 'success'
                            });
                        } else {
                            that.$message.error( data.message );
                        }
                    })
                } ,
                deleteManyEmps : function( ) {
                    axios.post( "/EmpData/deleteEmp" , that.empsId ).then(function (value) {
                        data = value.data ;
                        if ( data.booler ) {
                            that.$message({
                                message: '删除数据成功',
                                type: 'success'
                            });
                            that.empAllData() ;
                        } else {
                            that.$message.error( data.message );
                        }
                    })
                } ,
                deleteEmp : function ( row ) {
                    that.empsId = [] ;
                    that.empsId.push( row )
                    axios.post( "/EmpData/deleteEmp" , that.empsId ).then(function (value) {
                        data = value.data ;
                        if ( data.booler ) {
                            that.$message({
                                message: '删除数据成功',
                                type: 'success'
                            });
                            that.empAllData() ;
                        } else {
                            that.$message.error( data.message );
                        }
                    })
                } ,
                // 开启隐藏的窗口
                showAddEmpView : function () {
                    that.dialogVisible = true ;
                } ,
                // 增加用户
                addEmp : function ( row ) {
                    if ( row ) {
                        that.updateEmps() ;
                    } else {
                        axios.post( "/EmpData/addEmp" , that.emp ).then( function (value) {
                            var data = value.data ;
                            if ( data.booler ) {
                                that.empAllData() ;
                                that.dialogVisible = false ;
                                that.$message({
                                    message: '增加数据成功',
                                    type: 'success'
                                });
                            } else {
                                that.$message.error( data.message );
                            }
                        })
                    }
                } ,
                // 校验用户名
                verifyUsername: function () {
                    if ( that.emp.username != "" ) {
                        axios.get("/EmpData/verify?username=" + that.emp.username).then(function (value) {
                            var data = value.data;
                            if (data.booler) {
                                that.usernameState = 1;
                                that.usernameFont = "该用户名可用";
                            } else {
                                that.usernameState = 0;
                                that.usernameFont = "该用户名不可用";
                            }
                        })
                    }
                } ,
                // 切换页码
                handcurrentChange : function( currentPage ) {
                    that.currentPage = currentPage ;
                    that.empAllData () ;
                } ,
                SelectEmpNation : function () {
                    axios.get( "/EmpData/Nation" ).then(function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                            that.nations = data.entity ;
                        } else {
                            this.$message.error( data.message );
                        }
                    })
                } ,
                SelectEmpJoblevel : function () {
                    axios.get ( "/EmpData/jobLevel" ).then(function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                            that.joblevels = data.entity ;
                        } else {
                            this.$message.error( data.message );
                        }
                    })
                } ,
                SelectEmpPoliticsstatu : function () {
                    axios.get ( "/EmpData/politicsstatu" ).then(function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                            that.politics = data.entity ;
                        } else {
                            this.$message.error( data.message );
                        }
                    })
                } ,
                SelectEmpDepartments : function () {
                    axios.get ( "/EmpData/department" ).then(function (value) {
                        var data = value.data ;
                        if ( data.booler ) {
                            that.departments = data.entity ;
                        } else {
                            this.$message.error( data.message );
                        }
                    })
                } ,
                exportEmps : function () {
                    location.href = "/EmpData/exportData" ;
                }
            }
        });
    </script>
</html>